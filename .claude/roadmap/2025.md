# Awaken Coffee Ordering App - 2025 Development Roadmap

**Last Updated**: 2025-10-04 (Updated based on user feedback and design iterations)

## Project Overview

Awaken is an elder-friendly coffee ordering app designed for coffee carts and small coffee shops, optimized for iPad (7"+ landscape orientation). The app prioritizes accessibility, offline functionality, and simple workflows for both customers and baristas.

### Target Users
- **Primary**: Elder customers ordering coffee
- **Secondary**: Baristas managing orders and operations
- **Tertiary**: Admin users managing staff and inventory

### Target Device
- **Primary**: iPad (7 inches or larger) in **landscape orientation**
- **Minimum**: iPad mini (7.9 inch)
- **Recommended**: iPad 10.2 inch or iPad Air
- **Future**: iPhone support with adaptive layouts

### Core Design Principles
- **Elder-Friendly**: Large text (40pt titles), high contrast, simple navigation
- **iPad Landscape First**: All layouts optimized for horizontal tablet usage
- **Large Touch Targets**: Minimum 44pt, prefer 56-64pt for primary actions
- **Generous Spacing**: 40px gaps between buttons to prevent fat finger errors
- **Offline-First**: No internet dependency, local data storage
- **Accessibility**: WCAG AA compliance, VoiceOver support
- **Simplicity**: Minimal cognitive load, linear workflows
- **Default User Mode**: App always starts in customer-facing mode
- **Header-Based Navigation**: Mode switching and controls in header, not separate screens

## Development Phases

### Phase 1: Foundation & Core Infrastructure (Weeks 1-2)

#### 1.1 Project Setup & Configuration
- **Priority**: Critical
- **Dependencies**: None
- **Tasks**:
  - Configure app-wide settings and constants
  - Set up TypeScript interfaces for core data models
  - Create configuration system for passwords and default baristas
  - Implement AsyncStorage wrapper for local data persistence
  - Set up elder-friendly theme system (large fonts, high contrast)

#### 1.2 Core Data Models
- **Priority**: Critical
- **Dependencies**: Project setup
- **Tasks**:
  - Define `Drink` interface with category and options
  - Define `Order` interface with customer info, barista, timestamp
  - Create data validation utilities
  - Implement local storage schemas
  - Set up data migration system for future updates

#### 1.3 Navigation Architecture ‚úÖ COMPLETE
- **Priority**: Critical
- **Dependencies**: Project setup
- **Status**: Completed in LCC_8 with design iterations
- **Implemented**:
  - ‚úÖ Expo Router with user/admin route groups
  - ‚úÖ Header-based mode switching (ModeSwitch component)
  - ‚úÖ Inline password authentication in header
  - ‚úÖ Default to User Mode on app start
  - ‚úÖ Protected admin routes with AuthContext
  - ‚úÖ Large, accessible navigation components (BackButton, NavigationHeader)
  - ‚úÖ Animated error feedback for wrong passwords
  - ‚úÖ Keyboard support (Enter/Return) for password entry
- **Design Decisions**:
  - No separate mode selection screen
  - No separate login screen  
  - Admin access via header button with inline password input

### Phase 2: User Mode - Core Ordering Flow (Weeks 3-4)

#### 2.1 Drink Category Selection ‚úÖ COMPLETE
- **Priority**: High
- **Dependencies**: Foundation complete
- **Status**: Completed in LCC_8 iterations
- **Implemented**:
  - ‚úÖ 2√ó3 grid layout optimized for iPad landscape
  - ‚úÖ 6 drink categories with distinct colors:
    - Mocha (Brown #8B4513)
    - Chai Latte (Chocolate #D2691E)
    - Latte (Tan #DEB887)
    - Hot Chocolate (Sienna #A0522D)
    - Americano (Dark brown #654321)
    - Italian Soda (Pink #FF6B9D)
  - ‚úÖ 40pt titles with simple names
  - ‚úÖ Short, clear subtitles (18pt)
  - ‚úÖ 40px gaps between buttons (fat finger prevention)
  - ‚úÖ 192pt minimum button height (64pt √ó 3)
  - ‚úÖ White text with shadows for high contrast
  - ‚úÖ VoiceOver support with drink name + subtitle

#### 2.2 Drink Customization System ‚úÖ COMPLETE (LCC_9 - Enhanced)
- **Priority**: High
- **Dependencies**: Category selection (complete)
- **Status**: Completed with drink-specific customizations
- **Implemented Approach**:
  - ‚úÖ Drink-specific customization options (conditional rendering)
  - ‚úÖ Large option cards for Milk (Whole, Oat) - 128pt height
  - ‚úÖ Espresso shots selector with +/- buttons (56pt) for applicable drinks
  - ‚úÖ Chocolate type toggle (Regular ‚Üî White) for Mocha and Hot Chocolate
  - ‚úÖ Syrup flavor selection (Vanilla, Caramel, Hazelnut) for applicable drinks
  - ‚úÖ "Make it Dirty" checkbox for Chai Latte (controls shot availability)
  - ‚úÖ "Add Cream" checkbox for Italian Soda
  - ‚úÖ Dynamic navigation title showing "Customize [DrinkName]"
  - ‚úÖ Simplified interface: no quantity selector (1 per order), no pricing display
  - ‚úÖ "Add to Cart" button prominently displayed (64pt height)
  - ‚úÖ Haptic feedback on all interactions
- **Drink-Specific Customizations**:
  - **Mocha**: Milk, Shots (1-4), Chocolate Type, Syrup (optional)
  - **Chai Latte**: Milk, Make it Dirty, Shots (0-4, controlled by dirty status)
  - **Latte**: Milk, Shots (1-4), Syrup (optional)
  - **Hot Chocolate**: Milk, Chocolate Type
  - **Americano**: Shots (1-4) only
  - **Italian Soda**: Syrup (required), Add Cream checkbox
- **Design Decisions**:
  - Size hardcoded to 12oz (UI removed, data structure preserved)
  - Almond milk removed (only Whole and Oat)
  - All pricing removed (everything FREE)
  - Quantity selector removed (1 drink per order)
  - Color-coded header removed (simplified navigation title)

#### 2.3 Order Completion Flow ‚úÖ COMPLETE (LCC_10)
- **Priority**: High
- **Dependencies**: Drink customization (LCC_9) - Complete
- **Status**: Completed with updated cart item structure
- **Updated Tasks for iPad Landscape**:
  - **Cart Screen**:
    - List of selected drinks with large cards
    - Easy-to-modify quantities (large +/- buttons, 56pt)
    - Remove item button (44pt minimum)
    - Clear total calculation display (40pt font)
    - Large "Checkout" button (64pt height)
  - **Checkout Screen**:
    - Customer name input with large text field (24pt font, 64pt height)
    - Large on-screen keyboard
    - Optional phone number (per existing spec)
    - Order summary with all details
    - Large "Submit Order" button (64pt height)
  - **Order Confirmation**:
    - Clear confirmation message with order number
    - Estimated completion time
    - "Order Another" button to return to menu
  - Save order to StorageService
  - Barista assignment (use default list from config)

### Phase 3: Admin Mode & Management (Weeks 5-6)

#### 3.1 Admin Authentication ‚úÖ COMPLETE
- **Priority**: High
- **Dependencies**: Core ordering flow
- **Status**: Completed in LCC_8
- **Implemented**:
  - ‚úÖ Header-based mode switching (no separate screen)
  - ‚úÖ Inline password input in header (200px width)
  - ‚úÖ Password from APP_CONFIG.ADMIN.DEFAULT_PASSWORD
  - ‚úÖ Session persistence via isAdminSession in UserPreferences
  - ‚úÖ Enter/Return key support for password submission
  - ‚úÖ Animated error feedback (shake + red border)
  - ‚úÖ One-click switch back to User Mode
- **Design Change**: Simple password-only auth (no username), admin123 default

#### 3.2 Barista Management
- **Priority**: High
- **Dependencies**: Admin authentication
- **Tasks**:
  - View current barista list
  - Add/remove baristas with large, accessible forms
  - Set default baristas (Tina, Maggie, Bryant) from config
  - Validate barista assignments in existing orders
  - Bulk barista operations for shift changes

#### 3.3 Order Management & Analytics üìã PLANNED (LCC_13 - New Ticket)
- **Priority**: Medium
- **Dependencies**: Cart & Checkout flow (LCC_10B)
- **Updated Tasks for iPad Landscape**:
  - **Order List View**:
    - Grid layout optimized for landscape (2 columns)
    - Large order cards with clear status indicators
    - Color-coded by status (pending, in-progress, ready, completed)
    - Display: customer name, drinks, timestamp, barista
  - **Filtering & Search**:
    - Large filter buttons (56pt) for status
    - Search by customer name (large search field)
    - Date range filtering
  - **Quick Actions**:
    - Mark as In Progress (64pt button)
    - Mark as Ready (64pt button)
    - Mark as Completed (64pt button)
    - Cancel Order (with confirmation modal)
  - **Analytics** (future phase):
    - Popular drinks dashboard
    - Barista workload metrics
    - Export functionality

### Phase 4: Enhanced User Experience (Weeks 7-8)

#### 4.1 Accessibility Enhancements üîÑ REVISED (LCC_10 - Updated)
- **Priority**: Medium (most accessibility already built-in)
- **Dependencies**: Core features complete
- **Already Implemented**:
  - ‚úÖ VoiceOver labels on all interactive elements
  - ‚úÖ Large touch targets (44-64pt throughout)
  - ‚úÖ High contrast design with theme system
  - ‚úÖ Large fonts (18pt body, 40pt titles)
  - ‚úÖ Keyboard support (Enter/Return for password)
- **Remaining Tasks** (Reduced Scope):
  - Add haptic feedback to all buttons (iOS)
  - Verify VoiceOver announcements for all flows
  - Test with accessibility inspector
  - User testing with elder customers
  - Document accessibility features

#### 4.2 Error Handling & Feedback üîÑ IN PROGRESS (LCC_11 - Modal System)
- **Priority**: Medium
- **Dependencies**: Core user flow complete
- **Already Implemented**:
  - ‚úÖ Animated error feedback (password entry)
  - ‚úÖ Visual press feedback (opacity + scale)
  - ‚úÖ Data persistence with StorageService
  - ‚úÖ Graceful error handling (no crashes)
- **Remaining Tasks**:
  - Modal system for confirmations
  - Loading indicators for async operations
  - Success/error toast messages
  - Offline status indicators (if needed)
  - Comprehensive error boundaries

#### 4.3 Performance Optimization
- **Priority**: Medium
- **Dependencies**: Error handling
- **Tasks**:
  - Optimize component rendering for older devices
  - Implement efficient local storage queries
  - Reduce app startup time
  - Memory usage optimization
  - Battery usage optimization

### Phase 5: Future Integration Preparation (Weeks 9-10)

#### 5.1 Label Printer Integration Framework
- **Priority**: Low (Future)
- **Dependencies**: Core app complete
- **Tasks**:
  - Design printer integration interface
  - Create label template system
  - Implement print queue management
  - Add printer connectivity checks
  - Create fallback for offline printing

#### 5.2 Inventory Analysis Features
- **Priority**: Low (Future)
- **Dependencies**: Label printer framework
- **Tasks**:
  - Enhanced analytics dashboard
  - Inventory tracking based on order history
  - Syrup usage predictions
  - Popular drink trending
  - Export reports for external analysis

#### 5.3 Advanced Configuration
- **Priority**: Low (Future)
- **Dependencies**: Inventory features
- **Tasks**:
  - Dynamic drink menu configuration
  - Custom syrup options management
  - Pricing integration (future)
  - Multi-location support (future)
  - Remote configuration updates (future)

## Technical Architecture

### Data Flow
```
User Input ‚Üí Validation ‚Üí Business Logic ‚Üí Local Storage ‚Üí UI Update
     ‚Üë                                                        ‚Üì
Admin Mode ‚Üê Authentication ‚Üê Config Service ‚Üê Data Service
```

### Core Data Models

```typescript
interface Drink {
  category: 'mocha' | 'chai-latte' | 'latte' | 'hot-chocolate' | 'americano' | 'italian-soda';
  options: Record<string, number | boolean | string>;
  specialInstructions?: string;
}

interface Order {
  id: string;
  customerName: string;
  drink: Drink;
  barista: string;
  timestamp: Date;
  status: 'pending' | 'completed';
}

interface AppConfig {
  adminPassword: string;
  defaultBaristas: string[];
  syrupFlavors: string[];
  appSettings: {
    fontSize: 'large' | 'extra-large';
    theme: 'high-contrast' | 'standard';
  };
}
```

### Storage Strategy
- **AsyncStorage**: Order history, barista list, app preferences
- **Configuration File**: Admin password, default settings
- **In-Memory**: Current order state, UI preferences

## Success Metrics

### Phase 1-2 Success Criteria
- [ ] App launches successfully on iOS devices
- [ ] Users can complete full ordering workflow
- [ ] All drink categories and options functional
- [ ] Local data persistence working
- [ ] Elder-friendly UI principles implemented

### Phase 3-4 Success Criteria
- [ ] Admin mode secured and functional
- [ ] Barista management complete
- [ ] Accessibility standards met (WCAG AA)
- [ ] App performance optimized for target devices
- [ ] User testing with elder customers completed

### Phase 5 Success Criteria
- [ ] Label printer integration framework ready
- [ ] Basic inventory analytics available
- [ ] App ready for coffee cart deployment
- [ ] Documentation complete for operators

## Risk Mitigation

### Technical Risks
- **Elder usability**: Continuous testing with target users
- **Performance on older devices**: Regular testing on minimum spec devices
- **Data loss**: Robust backup and recovery systems
- **Accessibility compliance**: Early and frequent accessibility audits

### Business Risks
- **Complex ordering workflows**: Keep options simple and well-tested
- **Staff training**: Create clear documentation and training materials
- **Device compatibility**: Test on variety of iOS devices and versions

## Future Considerations

### Post-Launch Enhancements
- Integration with point-of-sale systems
- Customer loyalty program
- Multi-language support
- Apple Watch companion app
- iPad admin dashboard

### Scalability Planning
- Multi-location support
- Cloud synchronization (optional)
- Advanced analytics and reporting
- Integration with inventory management systems

## Development Timeline Summary

| Phase | Duration | Key Deliverables | Status |
|-------|----------|------------------|--------|
| 1 | 2 weeks | Foundation, data models, navigation | ‚úÖ Complete (LCC_1-8) |
| 2 | 2 weeks | Complete user ordering workflow | üîÑ In Progress |
| 3 | 2 weeks | Admin mode and order management | üìã Planned |
| 4 | 1 week | Accessibility enhancements & modals | üìã Planned |
| 5 | 2 weeks | Testing, documentation, polish | üìã Planned |

**Updated Timeline**: 9 weeks total (1 week saved due to design simplifications)

### Revised Ticket Roadmap

**Completed:**
- ‚úÖ LCC_1-8: Foundation, types, config, storage, validation, schema, theme, navigation
- ‚úÖ LCC_9: Drink Customization Screen with drink-specific options (enhanced requirements)
- ‚úÖ LCC_10: Cart, Checkout Flow & Haptic Feedback (updated with new cart item structure)
- ‚úÖ LCC_10B: Compact 3-Card Customization Layout (UI enhancement)

**Next Up:**
- üìã LCC_11: Modal System for Confirmations & Error Handling
- üìã LCC_12: Accessibility Testing & VoiceOver Verification
- üìã LCC_13: Admin Order Management Dashboard
- üìã LCC_14: Barista Management Interface
- üìã LCC_15: Analytics & Reporting

### Design Evolution Notes

This roadmap has been updated to reflect user feedback and design iterations:

1. **Default User Mode**: App starts directly in ordering mode, no mode selection screen
2. **iPad Landscape Optimization**: All layouts designed for 7"+ tablets in horizontal orientation
3. **Header-Based Navigation**: Mode switching in header, not separate screens
4. **Generous Spacing**: 40px gaps between buttons to prevent accidental taps
5. **Maximum Readability**: 40pt titles, 18pt body text, high contrast throughout
6. **Color-Coded Categories**: Each drink type has distinct color for quick recognition
7. **Visual Feedback**: Animations replace text alerts for better elder UX
8. **Keyboard Support**: Enter/Return key support for all text inputs

### LCC_10B: Compact 3-Card Customization Layout Summary

**Completed**: 2025-10-05

Redesigned drink customization screen to use a compact 3-card layout matching the main menu's 2√ó3 grid aesthetic. This enhancement significantly improved UX while maintaining elder-friendly accessibility standards.

**Key Changes**:

1. **Layout Transformation**:
   - Replaced large, scrollable option sections with compact 3-card row (192pt height)
   - Each drink type has 1-3 cards based on customization options
   - Empty placeholder views maintain grid balance for drinks with < 3 cards
   - 40px gaps between cards for fat finger prevention

2. **Card Types Implemented**:
   - **Toggle Cards**: Tap to switch between two states (milk, chocolate, cream, dirty)
   - **Control Cards**: Title with +/- buttons inside (shots)
   - Color-coded backgrounds representing ingredient types

3. **Color Coding System**:
   - Whole Milk: white (#FFFFFF)
   - Oat Milk: cornsilk (#FFF8DC)
   - Chocolate: sienna (#8B4513)
   - White Chocolate: white (#FFFFFF)
   - Cream: light goldenrod (#FFFACD)
   - Shots: progressive darkening with `rgba(101, 67, 33, ${0.1 + (shots * 0.15)})`

4. **Drink-Specific Layouts**:
   - **Mocha**: 3 cards (Milk, Shots, Chocolate) + syrup below
   - **Chai Latte**: 3 cards (Milk, Shots, No Espresso/Dirty)
   - **Latte**: 2 cards (Milk, Shots) + syrup below
   - **Hot Chocolate**: 2 cards (Milk, Chocolate)
   - **Americano**: 1 card (Shots, centered)
   - **Italian Soda**: 1 card (Cream) + syrup below

5. **Chai Latte Special Logic**:
   - Two-way binding: shots > 0 automatically sets dirty = true
   - Setting dirty = false automatically sets shots = 0
   - Default state: isDirty = false, shots = 0 ("No Espresso")
   - Only drink that allows shots to go to 0
   - UI displays "Dirty" when on, "No Espresso" when off

6. **UI Refinements**:
   - Added "(tap to switch)" subtitle on all toggle cards
   - Removed syrup placeholder cards from Latte and Italian Soda
   - Changed Italian Soda cream from checkbox to toggle card (default: on)
   - Progressive darkening on shots card provides visual feedback
   - High contrast text (white on dark, dark on light)

7. **Accessibility Maintained**:
   - All cards exceed 44pt minimum touch target (192pt height)
   - Clear VoiceOver labels on all interactive elements
   - High contrast color ratios throughout
   - Haptic feedback on all interactions

**Impact**:
- Eliminated scrolling for primary customization options
- Improved visual consistency across app (matches main menu)
- Maintained elder-friendly design principles
- Enhanced visual feedback through color coding
- Simplified interaction model (toggle vs. dropdown/checkbox)

**Technical Details**:
- File: `/app/(user)/drink/[id].tsx`
- Added 9 new style definitions for compact card system
- Updated state management for Chai Latte defaults
- Implemented conditional rendering for 6 drink types
- TypeScript: ‚úÖ No errors
- ESLint: ‚úÖ Passing (complexity warnings acceptable)

This roadmap prioritizes delivering a functional, accessible coffee ordering experience optimized for elder users on iPad tablets. Each phase delivers incremental value and incorporates user feedback for continuous improvement.